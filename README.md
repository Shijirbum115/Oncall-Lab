# üß™ OnCall Lab ‚Äì –ì—ç—Ä–∏–π–Ω –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–π–Ω “Ø–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π –∞–ø–ø

**OnCall Lab** –Ω—å –£–ª–∞–∞–Ω–±–∞–∞—Ç–∞—Ä —Ö–æ—Ç—ã–Ω —Ö—ç—Ä—ç–≥–ª—ç–≥—á–¥—ç–¥ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–π–Ω —à–∏–Ω–∂–∏–ª–≥—ç—ç –±–æ–ª–æ–Ω —ç–º—á–∏–π–Ω –≥—ç—Ä–∏–π–Ω “Ø–∑–ª—ç–≥–∏–π–≥ **–≥–∞—Ä —É—Ç–∞—Å–Ω–∞–∞—Å–∞–∞ –∑–∞—Ö–∏–∞–ª–∞—Ö** –±–æ–ª–æ–º–∂ –æ–ª–≥–æ—Ö Flutter + Supabase –¥—ç—ç—Ä —Å—É—É—Ä–∏–ª—Å–∞–Ω —Å–∏—Å—Ç–µ–º —é–º.

- üë©‚Äç‚öïÔ∏è **Patient –∞–ø–ø** ‚Äì —Ö—ç—Ä—ç–≥–ª—ç–≥—á –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏, “Ø–π–ª—á–∏–ª–≥—ç—ç —Å–æ–Ω–≥–æ—Ö, —Ü–∞–≥ –∑–∞—Ö–∏–∞–ª–∞—Ö, ”©”©—Ä–∏–π–Ω —Ö“Ø—Å—ç–ª—Ç“Ø“Ø–¥—ç—ç —Ö—è–Ω–∞—Ö
- üë®‚Äç‚öïÔ∏è **Doctor –∞–ø–ø** ‚Äì —ç–º—á/–ª–∞–±–æ—Ä–∞–Ω—Ç —à–∏–Ω—ç—ç—Ä –∏—Ä—Å—ç–Ω —Ö“Ø—Å—ç–ª—Ç, ”©”©—Ä–∏–π–Ω –∏–¥—ç–≤—Ö—Ç—ç–π –±–æ–ª–æ–Ω –¥—É—É—Å—Å–∞–Ω –∑–∞—Ö–∏–∞–ª–≥—É—É–¥—ã–≥ —Ö—è–Ω–∞—Ö
- üóÑ **Backend** ‚Äì Supabase (PostgreSQL, Row Level Security, Realtime)
- üåê **Admin panel (web)** ‚Äì —Ç—É—Å–¥–∞–∞ `admin_panel_web` —Ñ–æ–ª–¥–µ—Ä—Ç —Ö”©–≥–∂“Ø“Ø–ª–∂ –±–∞–π–≥–∞–∞

---

## üöÄ –¢–æ–π–º

### –ì–æ–ª –±–æ–ª–æ–º–∂—É—É–¥

- üè• **Laboratory directory**
  - –ë“Ø—Ö –±“Ø—Ä—Ç–≥—ç–ª—Ç—ç–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏, —Ö–∞—è–≥, —É—Ç–∞—Å, —Ü–∞–≥–∏–π–Ω —Ö—É–≤–∞–∞—Ä—å —Ö–∞—Ä–∞—Ö
  - –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏ –±“Ø—Ä–∏–π–Ω —Å–∞–Ω–∞–ª –±–æ–ª–≥–æ–∂ –±—É–π **test services** –∂–∞–≥—Å–∞–∞–ª—Ç, “Ø–Ω—ç, —Ö—É–≥–∞—Ü–∞–∞
- üß™ **Lab test booking (Clinic visit / Home visit)**
  - Patient ‚Äì —à–∏–Ω–∂–∏–ª–≥—ç—ç–Ω–∏–π —Ç”©—Ä”©–ª —Å–æ–Ω–≥–æ–æ–¥ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∞—Å **home sample collection** –∑–∞—Ö–∏–∞–ª–∞—Ö
  - –¶–∞–≥–∏–π–Ω —Å–ª–æ—Ç, –±–∞–π—Ä—à–ª—ã–Ω —Ö–∞—è–≥, –Ω—ç–º—ç–ª—Ç —Ç—ç–º–¥—ç–≥–ª—ç–ª –æ—Ä—É—É–ª–∞—Ö
- ü©∫ **Direct services (—ç–º—á/—Å—É–≤–∏–ª–∞–≥—á–∏–π–Ω —à—É—É–¥ “Ø–π–ª—á–∏–ª–≥—ç—ç)**
  - –≠–º—á–∏–π–Ω “Ø–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π —Ç”©—Ä”©–ª (ultrasound, ECG, nursing –≥—ç—Ö –º—ç—Ç) —Å–æ–Ω–≥–æ—Ö
  - ‚ÄúAny available doctor‚Äù —ç—Å–≤—ç–ª —Ç–æ–¥–æ—Ä—Ö–æ–π —ç–º—á —Å–æ–Ω–≥–æ—Ö
  - –ê–¥—Ä–µ—Å—ç—ç —Ö–∞–¥–≥–∞–ª–∞–∞–¥ –¥–∞—Ä–∞–∞–≥–∏–π–Ω —É–¥–∞–∞ —à—É—É–¥ –∞—à–∏–≥–ª–∞—Ö
- üìä **Requests / Dashboard**
  - Patient ‚Äì —Ö“Ø—Å—ç–ª—Ç“Ø“Ø–¥–∏–π–≥ **Active / Completed / Cancelled** —Ç–∞–±—É—É–¥–∞–∞—Ä —Ö–∞—Ä–∞—Ö
  - Doctor ‚Äì **Available / My Requests / Completed** —Ç–∞–±—Ç–∞–π Dashboard
  - –•“Ø—Å—ç–ª—Ç–∏–π–Ω —Å—Ç–∞—Ç—É—Å—É—É–¥: `pending ‚Üí accepted ‚Üí on_the_way ‚Üí sample_collected ‚Üí delivered_to_lab ‚Üí completed`
  - Realtime —à–∏–Ω—ç—á–ª—ç–ª—Ç (Supabase realtime)

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã–Ω —Ç–æ–≤—á (High-level)

### üì± Frontend

- Flutter 3 (Dart)
- State management: `mobx`, `flutter_mobx`
- Dependency injection: `get_it`
- Data models: `freezed`, `json_serializable`
- Navigation: —ç–Ω–≥–∏–π–Ω `Navigator` (template-–¥ AutoRoute –∑–∞–∞–≤–∞—Ä –±–∞–π–≥–∞–∞ —á –æ–¥–æ–æ–≥–æ–æ—Ä basic navigation)

–§–æ–ª–¥–µ—Ä –±“Ø—Ç—ç—Ü (mobile):

- `lib/core` ‚Äì color, strings, Supabase config, services
- `lib/data` ‚Äì models (`ProfileModel`, `DoctorProfileModel`, `LaboratoryModel`, `TestRequestModel` ‚Ä¶), repositories
- `lib/stores` ‚Äì MobX stores (`AuthStore`, `ServiceStore`, `TestRequestStore`, `DoctorRequestStore`)
- `lib/ui/patient` ‚Äì patient –∞–ø–ø–∏–π–Ω –±“Ø—Ö —ç–∫—Ä–∞–Ω–∏—É–¥
- `lib/ui/doctor` ‚Äì doctor –∞–ø–ø–∏–π–Ω –±“Ø—Ö —ç–∫—Ä–∞–Ω–∏—É–¥
- `lib/ui/shared` ‚Äì splash screen, shared widgets

### üóÑ Backend (Supabase)

–î—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π–≥: `docs/BACKEND_ARCHITECTURE.md` —Ñ–∞–π–ª–∞–∞—Å —Ö–∞—Ä–Ω–∞ —É—É.

–ì–æ–ª —Ö“Ø—Å–Ω—ç–≥—Ç“Ø“Ø–¥:

- `profiles` ‚Äì —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω “Ø–Ω–¥—Å—ç–Ω –º—ç–¥—ç—ç–ª—ç–ª (patient / doctor / admin)
- `doctor_profiles` ‚Äì —ç–º—á–∏–π–Ω –º—ç—Ä–≥—ç–∂–∏–ª, license, —Ç—É—Ä—à–ª–∞–≥–∞, rating
- `laboratories` ‚Äì –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—É–¥—ã–Ω –±“Ø—Ä—Ç–≥—ç–ª, –±–∞–π—Ä—à–∏–ª
- `test_types` ‚Äì —Å—Ç–∞–Ω–¥–∞—Ä—Ç laboratory test –∂–∞–≥—Å–∞–∞–ª—Ç
- `services`, `laboratory_services`, `doctor_services` ‚Äì “Ø–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π —Ç”©—Ä”©–ª, –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏ / —ç–º—á–∏–π–Ω —Å–∞–Ω–∞–ª –±–æ–ª–≥–æ–∂ –±—É–π service-“Ø“Ø–¥
- `test_requests` ‚Äì –±“Ø—Ö –∑–∞—Ö–∏–∞–ª–≥—ã–Ω “Ø–Ω–¥—Å—ç–Ω —Ö“Ø—Å–Ω—ç–≥—Ç
- `notifications`, `request_status_history`, `audit_logs` ‚Äì notification, —Å—Ç–∞—Ç—É—Å—ã–Ω —Ç“Ø“Ø—Ö, audit

Security:

- Row Level Security (RLS) –±“Ø—Ö —Ö“Ø—Å–Ω—ç–≥—Ç –¥—ç—ç—Ä –∏–¥—ç–≤—Ö—Ç—ç–π
- Patient –∑”©–≤—Ö”©–Ω ”©”©—Ä–∏–π–Ω `test_requests` –±–æ–ª–æ–Ω ”©”©—Ä–∏–π–Ω profile-–≥ —É–Ω—à–∏–∂/–∑–∞—Å–Ω–∞
- Doctor –∑”©–≤—Ö”©–Ω ”©”©—Ä—Ç—ç–π –Ω—å —Ö–æ–ª–±–æ–≥–¥—Å–æ–Ω patient-“Ø“Ø–¥–∏–π–Ω profile-–≥ —Ö–∞—Ä–Ω–∞
- Admin –±“Ø—Ä—ç–Ω —Ö–∞–Ω–¥–∞–ª—Ç—Ç–∞–π (RLS functions `is_admin(...)` –∞—à–∏–≥–ª–∞–Ω–∞)

Realtime:

- `test_requests` ‚Äì —Å—Ç–∞—Ç—É—Å ”©”©—Ä—á–ª”©–≥–¥”©—Ö”©–¥ realtime stream
- `notifications` ‚Äì notification store –¥—ç—ç—Ä realtime

---

## üõ† –•”©–≥–∂“Ø“Ø–ª—ç–ª—Ç–∏–π–Ω –æ—Ä—á–∏–Ω —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö

–î–æ–æ—Ä—Ö –∞–ª—Ö–º—É—É–¥ Windows-–¥ –∑–æ—Ä–∏—É–ª—Å–∞–Ω, Mac –¥—ç—ç—Ä —á –µ—Ä”©–Ω—Ö–∏–π–¥”©”© –∏–∂–∏–ª.
–î—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π: `docs/DEV_ENVIRONMENT_SETUP.md`, `docs/WINDOWS_SETUP.md`.

### 1. –®–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π –∑“Ø–π–ª—Å

- Flutter SDK (`flutter --version` –∞–∂–∏–ª–ª–∞–¥–∞–≥ –±–∞–π—Ö)
- Android Studio (—ç—Å–≤—ç–ª Xcode/—ç–º—É–ª—è—Ç–æ—Ä ‚Äì Mac-–¥)
- VS Code –±—É—é—É IDE (IntelliJ / Android Studio —á –±–∞–π–∂ –±–æ–ª–Ω–æ)
- Git

### 2. Dependency —Ç–∞—Ç–∞—Ö

```bash
flutter pub get
```

### 3. Code generation (models, MobX, json)

```bash
dart run build_runner build --delete-conflicting-outputs
```

–•”©–≥–∂“Ø“Ø–ª–∂ –±–∞–π—Ö “Ø–µ–¥:

```bash
dart run build_runner watch --delete-conflicting-outputs
```

### 4. Supabase —Ç–æ—Ö–∏—Ä–≥–æ–æ —Ö–∏–π—Ö

1. Supabase project “Ø“Ø—Å–≥—ç–∂ (—ç—Å–≤—ç–ª README_BACKEND_SETUP –¥—ç—ç—Ä ”©–≥—Å”©–Ω project –∞—à–∏–≥–ª–∞–∂)
2. `lib/core/constants/supabase_config.dart` —Ñ–∞–π–ª—ã–≥ **–ª–æ–∫–∞–ª** –¥—ç—ç—Ä—ç—ç “Ø“Ø—Å–≥—ç–Ω—ç (Git-—Ç “Ø–ª –æ—Ä–æ—Ö —ë—Å—Ç–æ–π, `.gitignore`-–¥ –æ—Ä—Å–æ–Ω):

```dart
class SupabaseConfig {
  static const String supabaseUrl = 'https://<project>.supabase.co';
  static const String supabaseAnonKey = '<anon-key>';
}
```

3. Supabase SQL —Ä–µ–¥–∞–∫—Ç–æ—Ä –¥—ç—ç—Ä `supabase/migrations/*.sql` —Ñ–∞–π–ª—É—É–¥—ã–≥ –∞–∂–∏–ª–ª—É—É–ª–∂ schema-–≥ —Ç–æ—Ö–∏—Ä—É—É–ª–Ω–∞ (—è–ª–∞–Ω–≥—É—è–∞ `fix_profiles_rls` migration).

Backend-–∏–π–Ω –±“Ø—Ä—ç–Ω —Ç–∞–π–ª–±–∞—Ä: `README_BACKEND_SETUP.md`, `docs/BACKEND_ARCHITECTURE.md`.

---

## ‚ñ∂Ô∏è –ê–ø–ø –∞–∂–∏–ª—É—É–ª–∞—Ö

```bash
# –≠–º—É–ª—è—Ç–æ—Ä —ç—Å–≤—ç–ª —Ç”©—Ö”©”©—Ä”©–º–∂ —à–∞–ª–≥–∞—Ö
flutter devices

# Android —ç—Å–≤—ç–ª iOS –¥—ç—ç—Ä –∞–∂–∏–ª–ª—É—É–ª–∞—Ö
flutter run
```

–•”©–≥–∂“Ø“Ø–ª—ç–ª—Ç –¥—ç—ç—Ä:

- `r` ‚Äì hot reload
- `R` ‚Äì hot restart

---

## üì± Patient –∞–ø–ø ‚Äì –≥–æ–ª —ç–∫—Ä–∞–Ω–∏—É–¥

- üè† **Home screen**
  - ‚ÄúClinic visit‚Äù / ‚ÄúHome visit‚Äù —Å–æ–Ω–≥–æ–ª—Ç—É—É–¥—Ç–∞–π modern hero —Ö—ç—Å—ç–≥
  - ‚ÄúAvailable tests‚Äù ‚Äì Supabase-–∞–∞—Å –∏—Ä–∂ –±—É–π test services carousel
  - ‚ÄúAvailable doctors‚Äù ‚Äì –¥–æ–∫—Ç–æ—Ä—É—É–¥—ã–Ω grid
- üß™ **Laboratories**
  - –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—É–¥—ã–Ω –∂–∞–≥—Å–∞–∞–ª—Ç + search
  - –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏ detail ‚Äì “Ø–π–ª—á–∏–ª–≥—ç—ç, “Ø–Ω—ç, —Ö–∞—è–≥, —É—Ç–∞—Å
  - –õ–∞–± service booking ‚Äì —Ü–∞–≥, —Ö–∞—è–≥, notes
- üßç‚Äç‚ôÄÔ∏è **Direct services**
  - “Æ–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π —Ç”©—Ä–ª”©”©—Ä grouped list
  - ‚ÄúAny available doctor‚Äù —ç—Å–≤—ç–ª —Ç–æ–¥–æ—Ä—Ö–æ–π —ç–º—á —Å–æ–Ω–≥–æ—Ö
  - Direct service booking ‚Äì —Ü–∞–≥, —Ö–∞—è–≥, notes
- üìÜ **My Requests**
  - Tab-—É—É–¥: **Active / Completed / Cancelled**
  - –°—Ç–∞—Ç—É—Å—ã–Ω ”©–Ω–≥”©, “Ø–Ω—ç, —Ç–æ–≤—á –º—ç–¥—ç—ç–ª—ç–ª
- üë§ **Profile**
  - –ù—ç—Ä, —É—Ç–∞—Å, role (Patient)
  - Saved address ‚Äì –±–∞–π—Ä—à–ª–∞–∞ —Ö–∞–¥–≥–∞–ª–∞—Ö, ”©”©—Ä—á–ª”©—Ö
  - Sign out

---

## üë®‚Äç‚öïÔ∏è Doctor –∞–ø–ø ‚Äì –≥–æ–ª —ç–∫—Ä–∞–Ω–∏—É–¥

- üìä **My Dashboard**
  - Tab-—É—É–¥: **Available / My Requests / Completed**
  - Available ‚Äì —à–∏–Ω—ç –∑–∞—Ö–∏–∞–ª–≥—É—É–¥, ‚ÄúAccept‚Äù —Ö–∏–π–∂ –∏–¥—ç–≤—Ö—Ç—ç–π –±–æ–ª–≥–æ—Ö
  - My Requests ‚Äì —è–≤–∂ –±–∞–π–≥–∞–∞ —Ö“Ø—Å—ç–ª—Ç“Ø“Ø–¥
  - Completed ‚Äì –¥—É—É—Å—Å–∞–Ω —Ö“Ø—Å—ç–ª—Ç“Ø“Ø–¥
- üìÑ **Request detail**
  - Patient-–∏–π–Ω —Ö–∞—è–≥, —Ü–∞–≥, “Ø–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π —Ç”©—Ä”©–ª, “Ø–Ω—ç
  - –°—Ç–∞—Ç—É—Å—ã–Ω action-—É—É–¥: ‚ÄúOn the way‚Äù, ‚ÄúSample collected‚Äù, ‚ÄúDelivered to lab‚Äù, ‚ÄúCompleted‚Äù, ‚ÄúCancel‚Äù
  - Cancellation reason –∞–≤–∞—Ö –¥–∏–∞–ª–æ–≥
- üë§ **Doctor profile**
  - –ù—ç—Ä, –º—ç—Ä–≥—ç–∂–∏–ª, rating, completed —Ç–æ–æ
  - Contact info, license, —Ç—É—Ä—à–ª–∞–≥–∞

---

## üìÇ –ì–æ–ª —Ñ–∞–π–ª—É—É–¥ / –±–∞—Ä–∏–º—Ç—É—É–¥

- `README_BACKEND_SETUP.md` ‚Äì Supabase backend-–∏–π–≥ –∞–Ω—Ö–Ω–∞–∞—Å–∞–∞ —Ö—ç—Ä—Ö—ç–Ω –±–æ—Å–≥–æ—Å–æ–Ω, project URL, seed data
- `docs/BACKEND_ARCHITECTURE.md` ‚Äì database schema, RLS, functions, triggers
- `docs/FLUTTER_INTEGRATION.md` ‚Äì Flutter-–æ–æ—Å Supabase-—Ç—ç–π —Ö—ç—Ä—Ö—ç–Ω —Ö–æ–ª–±–æ–≥–¥–æ–∂, models, repositories, stores –∞—à–∏–≥–ª–∞–∂ –±–∞–π–≥–∞–∞ —Ç–∞–π–ª–±–∞—Ä
- `docs/UI_TEMPLATE_INTEGRATION.md` ‚Äì UI template-–∏–π–≥ —è–∞–∂ adapt —Ö–∏–π—Å–Ω–∏–π–≥ —Ç–∞–π–ª–±–∞—Ä–ª–∞—Å–∞–Ω
- `docs/DEV_ENVIRONMENT_SETUP.md`, `docs/WINDOWS_SETUP.md` ‚Äì —Ö”©–≥–∂“Ø“Ø–ª—ç–ª—Ç–∏–π–Ω –æ—Ä—á–∏–Ω

---

## üîê –ù—É—É—Ü –º—ç–¥—ç—ç–ª—ç–ª, Git

Git –¥—ç—ç—Ä commit —Ö–∏–π—Ö–¥—ç—ç –¥–∞—Ä–∞–∞—Ö —Ñ–∞–π–ª—É—É–¥ **–æ–≥—Ç –æ—Ä–æ—Ö —ë—Å–≥“Ø–π**:

- `lib/core/constants/supabase_config.dart` ‚Äì Supabase URL, anon key
- `.env` ‚Äì env variables
- Supabase service role key, JWT secret –∑—ç—Ä—ç–≥ –±“Ø—Ö –Ω—É—É—Ü

–≠–¥–≥—ç—ç—Ä–∏–π–≥ `.gitignore` –¥—ç—ç—Ä –∞–ª—å —Ö—ç–¥–∏–π–Ω –Ω—ç–º—Å—ç–Ω –±–∞–π–≥–∞–∞. –•—ç—Ä–≤—ç—ç —à–∏–Ω—ç –Ω—É—É—Ü —Ñ–∞–π–ª –Ω—ç–º–±—ç–ª –∑–∞–∞–≤–∞–ª `.gitignore`-—Ç –Ω—ç–º—ç—ç—Ä—ç–π.

---

## ü§ù Contribution

–•—ç—Ä–≤—ç—ç —á–∏ —ç–Ω—ç project –¥—ç—ç—Ä “Ø—Ä–≥—ç–ª–∂–ª“Ø“Ø–ª–∂ —Ö”©–≥–∂“Ø“Ø–ª—ç—Ö –±–æ–ª:

1. Repo-–≥ clone —Ö–∏–π–Ω—ç (—ç—Å–≤—ç–ª ”©”©—Ä –º–∞—à–∏–Ω –¥—ç—ç—Ä—ç—ç pull —Ö–∏–π–Ω—ç)
2. `flutter pub get` + `build_runner` –∞–∂–∏–ª–ª—É—É–ª–Ω–∞
3. –®–∏–Ω—ç feature / bugfix-—ç—ç `feature/...` branch –¥—ç—ç—Ä —Ö–∏–π–∂, commit/push —Ö–∏–π–Ω—ç

Issue, idea –±–∞–π–≤–∞–ª README –¥–æ—Ç–æ—Ä—Ö –±“Ø—Ç—ç—Ü—Ç—ç–π —Ç–∞–∞—Ä—É—É–ª–∂ —Ñ–∞–π–ª—É—É–¥—ã–≥ update —Ö–∏–π—Ö—ç–¥ –ª —Ö–∞–Ω–≥–∞–ª—Ç—Ç–∞–π.

---

**OnCall Lab ‚Äì ‚ÄúAll you have to do is CALL US‚Äù üìû**  
–ì—ç—Ä—ç—ç—Å—ç—ç —Ö–æ–ª–≥“Ø–π–≥—ç—ç—Ä, –∞–ø–ø-–∞–∞—Å–∞–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–π–Ω —à–∏–Ω–∂–∏–ª–≥—ç—ç –∑–∞—Ö–∏–∞–ª–∂, —ç–º—á–∏–π–Ω “Ø–∑–ª—ç–≥–∏–π–≥ –¥—ç—Ä–≥—ç–¥—ç—ç –¥—É—É–¥—ä—è. üöë
